{"ast":null,"code":"import React, { Fragment, useCallback, useMemo, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '../Box';\nimport { Drop } from '../Drop';\nimport { Grid } from '../Grid';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { focusStyle, unfocusStyle } from '../../utils';\nimport { halfPad } from './utils';\nimport { Swatch } from './Swatch';\nvar DetailControl = styled(Box).withConfig({\n  displayName: \"Detail__DetailControl\",\n  componentId: \"sc-huiwg9-0\"\n})([\"&:focus{\", \"}&:focus:not(:focus-visible){\", \"}\"], focusStyle(), unfocusStyle());\n\nvar Detail = function Detail(_ref) {\n  var activeProperty = _ref.activeProperty,\n      axis = _ref.axis,\n      data = _ref.data,\n      pad = _ref.pad,\n      series = _ref.series,\n      seriesStyles = _ref.seriesStyles,\n      renderValue = _ref.renderValue,\n      thickness = _ref.thickness;\n\n  var _useState = useState(),\n      detailIndex = _useState[0],\n      setDetailIndex = _useState[1];\n\n  var activeIndex = useRef();\n  var detailRefs = useMemo(function () {\n    return [];\n  }, []);\n  var onMouseLeave = useCallback(function (event) {\n    // Only remove detail if the mouse isn't over the active index.\n    // This helps distinguish leaving the drop on the edge where it is\n    // anchored.\n    var rect = activeIndex.current.getBoundingClientRect();\n\n    if (event.pageX < rect.left || event.pageX > rect.right || event.pageY < rect.top || event.pageY > rect.bottom) {\n      activeIndex.current = undefined;\n      setDetailIndex(undefined);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: function onLeft() {\n      if (detailIndex === undefined) setDetailIndex(data.length - 1);else if (detailIndex > 0) setDetailIndex(detailIndex - 1);\n    },\n    onRight: function onRight() {\n      if (detailIndex === undefined) setDetailIndex(0);else if (detailIndex < data.length - 1) setDetailIndex(detailIndex + 1);\n    }\n  }, /*#__PURE__*/React.createElement(DetailControl, {\n    key: \"band\",\n    tabIndex: 0,\n    direction: \"row\",\n    fill: true,\n    pad: // ensure the hit targets and center lines align with\n    // the data/guide lines\n    (pad == null ? void 0 : pad.horizontal) && halfPad[pad.horizontal] && {\n      horizontal: halfPad[pad.horizontal]\n    } || pad,\n    justify: \"between\",\n    responsive: false,\n    onFocus: function onFocus() {},\n    onBlur: function onBlur() {\n      return setDetailIndex(undefined);\n    }\n  }, data.map(function (_, i) {\n    return /*#__PURE__*/React.createElement(Box // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: i,\n      align: \"center\",\n      responsive: false,\n      width: thickness,\n      onMouseOver: function onMouseOver(event) {\n        activeIndex.current = event.currentTarget;\n        setDetailIndex(i);\n      },\n      onMouseLeave: onMouseLeave,\n      onFocus: function onFocus() {},\n      onBlur: function onBlur() {}\n    }, /*#__PURE__*/React.createElement(Box, {\n      ref: function ref(c) {\n        detailRefs[i] = c;\n      },\n      fill: \"vertical\",\n      border: detailIndex === i ? true : undefined\n    }));\n  }))), detailIndex !== undefined && detailRefs[detailIndex] && /*#__PURE__*/React.createElement(Drop, {\n    key: \"drop\",\n    target: detailRefs[detailIndex],\n    align: detailIndex > data.length / 2 ? {\n      right: 'left'\n    } : {\n      left: 'right'\n    },\n    plain: true,\n    onMouseLeave: onMouseLeave\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: \"small\",\n    background: {\n      color: 'background-back'\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    columns: ['auto', 'auto', 'auto'],\n    gap: \"xsmall\",\n    align: \"center\"\n  }, series.filter(function (_ref2) {\n    var property = _ref2.property;\n    return !activeProperty || activeProperty === property || axis && axis.x && axis.x.property === property;\n  }).map(function (serie) {\n    var propertyStyle = seriesStyles[serie.property];\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: serie.property\n    }, propertyStyle ? /*#__PURE__*/React.createElement(Swatch, propertyStyle) : /*#__PURE__*/React.createElement(\"span\", null), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, serie.label || serie.property), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\",\n      weight: \"bold\"\n    }, renderValue(serie, detailIndex)));\n  })))));\n};\n\nexport { Detail };","map":{"version":3,"names":["React","Fragment","useCallback","useMemo","useRef","useState","styled","Box","Drop","Grid","Keyboard","Text","focusStyle","unfocusStyle","halfPad","Swatch","DetailControl","withConfig","displayName","componentId","Detail","_ref","activeProperty","axis","data","pad","series","seriesStyles","renderValue","thickness","_useState","detailIndex","setDetailIndex","activeIndex","detailRefs","onMouseLeave","event","rect","current","getBoundingClientRect","pageX","left","right","pageY","top","bottom","undefined","createElement","onLeft","length","onRight","key","tabIndex","direction","fill","horizontal","justify","responsive","onFocus","onBlur","map","_","i","align","width","onMouseOver","currentTarget","ref","c","border","target","plain","background","color","columns","gap","filter","_ref2","property","x","serie","propertyStyle","size","label","weight"],"sources":["/Users/alinoki/Desktop/my-app/node_modules/grommet/es6/components/DataChart/Detail.js"],"sourcesContent":["import React, { Fragment, useCallback, useMemo, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '../Box';\nimport { Drop } from '../Drop';\nimport { Grid } from '../Grid';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { focusStyle, unfocusStyle } from '../../utils';\nimport { halfPad } from './utils';\nimport { Swatch } from './Swatch';\nvar DetailControl = styled(Box).withConfig({\n  displayName: \"Detail__DetailControl\",\n  componentId: \"sc-huiwg9-0\"\n})([\"&:focus{\", \"}&:focus:not(:focus-visible){\", \"}\"], focusStyle(), unfocusStyle());\n\nvar Detail = function Detail(_ref) {\n  var activeProperty = _ref.activeProperty,\n      axis = _ref.axis,\n      data = _ref.data,\n      pad = _ref.pad,\n      series = _ref.series,\n      seriesStyles = _ref.seriesStyles,\n      renderValue = _ref.renderValue,\n      thickness = _ref.thickness;\n\n  var _useState = useState(),\n      detailIndex = _useState[0],\n      setDetailIndex = _useState[1];\n\n  var activeIndex = useRef();\n  var detailRefs = useMemo(function () {\n    return [];\n  }, []);\n  var onMouseLeave = useCallback(function (event) {\n    // Only remove detail if the mouse isn't over the active index.\n    // This helps distinguish leaving the drop on the edge where it is\n    // anchored.\n    var rect = activeIndex.current.getBoundingClientRect();\n\n    if (event.pageX < rect.left || event.pageX > rect.right || event.pageY < rect.top || event.pageY > rect.bottom) {\n      activeIndex.current = undefined;\n      setDetailIndex(undefined);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: function onLeft() {\n      if (detailIndex === undefined) setDetailIndex(data.length - 1);else if (detailIndex > 0) setDetailIndex(detailIndex - 1);\n    },\n    onRight: function onRight() {\n      if (detailIndex === undefined) setDetailIndex(0);else if (detailIndex < data.length - 1) setDetailIndex(detailIndex + 1);\n    }\n  }, /*#__PURE__*/React.createElement(DetailControl, {\n    key: \"band\",\n    tabIndex: 0,\n    direction: \"row\",\n    fill: true,\n    pad: // ensure the hit targets and center lines align with\n    // the data/guide lines\n    (pad == null ? void 0 : pad.horizontal) && halfPad[pad.horizontal] && {\n      horizontal: halfPad[pad.horizontal]\n    } || pad,\n    justify: \"between\",\n    responsive: false,\n    onFocus: function onFocus() {},\n    onBlur: function onBlur() {\n      return setDetailIndex(undefined);\n    }\n  }, data.map(function (_, i) {\n    return /*#__PURE__*/React.createElement(Box // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: i,\n      align: \"center\",\n      responsive: false,\n      width: thickness,\n      onMouseOver: function onMouseOver(event) {\n        activeIndex.current = event.currentTarget;\n        setDetailIndex(i);\n      },\n      onMouseLeave: onMouseLeave,\n      onFocus: function onFocus() {},\n      onBlur: function onBlur() {}\n    }, /*#__PURE__*/React.createElement(Box, {\n      ref: function ref(c) {\n        detailRefs[i] = c;\n      },\n      fill: \"vertical\",\n      border: detailIndex === i ? true : undefined\n    }));\n  }))), detailIndex !== undefined && detailRefs[detailIndex] && /*#__PURE__*/React.createElement(Drop, {\n    key: \"drop\",\n    target: detailRefs[detailIndex],\n    align: detailIndex > data.length / 2 ? {\n      right: 'left'\n    } : {\n      left: 'right'\n    },\n    plain: true,\n    onMouseLeave: onMouseLeave\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: \"small\",\n    background: {\n      color: 'background-back'\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    columns: ['auto', 'auto', 'auto'],\n    gap: \"xsmall\",\n    align: \"center\"\n  }, series.filter(function (_ref2) {\n    var property = _ref2.property;\n    return !activeProperty || activeProperty === property || axis && axis.x && axis.x.property === property;\n  }).map(function (serie) {\n    var propertyStyle = seriesStyles[serie.property];\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: serie.property\n    }, propertyStyle ? /*#__PURE__*/React.createElement(Swatch, propertyStyle) : /*#__PURE__*/React.createElement(\"span\", null), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, serie.label || serie.property), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\",\n      weight: \"bold\"\n    }, renderValue(serie, detailIndex)));\n  })))));\n};\n\nexport { Detail };"],"mappings":"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"},"metadata":{},"sourceType":"module"}